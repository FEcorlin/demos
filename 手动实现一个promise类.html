<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise</title>
</head>
<body>
<script>
    function MyPromise(func) {
        this.callbacks = '';
//        func.call(this,this.resolve);
        func(this.resolve);
    }
    MyPromise.prototype.then = function (callback) {
        this.callbacks = callback;
    }
    MyPromise.prototype.resolve = function (value) {
        this.callbacks(value);
    }


    function getUserId() {
        return new MyPromise(function (resolve) {
            console.log(this);
            setTimeout(function () {
                if(true){
                    resolve(1);
                }
            },200);
        });
    }
    getUserId().then(function (id) {
        console.log(id);
    });


</script>
</body>
</html>